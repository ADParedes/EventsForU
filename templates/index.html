{% extends 'base.html' %}

{% load staticfiles %}
<link rel="stylesheet" type="text/css" href="{% static "css/bootstrap.min.css" %}" />

{% block title %} Home {% endblock title %}

{% block nav2link %} 

  {% if user.is_authenticated %}
    
  {% else %}
    /signup
  {% endif %}

{% endblock nav2link %}

{% block nav2 %} 

  {% if user.is_authenticated %}
    Hello, {{user.first_name}}
  {% else %}
    Login
  {% endif %}

{% endblock nav2 %}

{% block nav3link %} 

  {% if user.is_authenticated %}
    /contact
  {% else %}
    /contact
  {% endif %}

{% endblock nav3link %}

{% block nav3 %} 

  {% if user.is_authenticated %}
    Participate
  {% else %}
    Participate
  {% endif %}

{% endblock nav3 %}

{% block nav4link %} 

  {% if user.is_authenticated %}
    /logout 
  {% endif %}

{% endblock nav4link %}

{% block nav4 %} 

  {% if user.is_authenticated %}
    LogOut
  {% endif %}

{% endblock nav4 %}

{% block body %} 


<div class = "container-fluid px-0">
<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="/static/img/slider1.jpg" class="d-block w-100" alt="...">
    </div>
    <div class="carousel-item">
      <img src="/static/img/slider2.jpg" class="d-block w-100" alt="...">
    </div>
    <div class="carousel-item">
      <img src="/static/img/slider3.jpg" class="d-block w-100" alt="...">
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
</div>

<div class="container my-3">

<form class="form-inline my-5 my-lg-0" style="position: relative;left:280px; height: 100px;">
      <input class="form-control mr-sm-2" style="height: 50px; width: 500px;" type="search" placeholder="Search event categories" aria-label="Search">
      <button class="btn btn-outline-success my-2 my-sm-0" style="height: 50px;" type="submit">Search</button>
</form>

<h1 class="text-center mb-3"> View Upcoming Events </h1>
  
  <div class="row">
  {% for event in events %}
  <div class="col-sm-6 mb-3 d-flex">
  <div class="card">
    <img src="https://source.unsplash.com/1600x900/?{{event.title}}" class="card-img-top" alt="...">
    <div class="card-body">
      <h4 class="card-text" style="text-align:center; color:orange;">{{event.tag}}</h4>
      <h3 class="card-title">{{event.title}}</h3>
      <h5 class="card-text">{{event.header}}</h5>
      <p class="card-text">{{event.desc}}</p>
      <h5 class="card-text">Location :{{event.location}}</h5>
      <h6 class="card-text">Created on :{{event.created_at}}</h6>
      <br>
      <p><strong>Unique id:-</strong> <p class="card-text" id="id"><strong>{{event.id}}</strong></p> </p>
      <button class="btn btn-outline-success" id="btn">Copy Unique id</button>
    </div>
    </div>
  </div>
  {% endfor %}
</div>
<script>
  var btn = document.querySelector('#btn');  
  btn.addEventListener('click', function(event) {  
  // Select the email link anchor text  
  var id = document.querySelector('#id');  
  var range = document.createRange();  
  range.selectNode(id);  
  window.getSelection().addRange(range);  

  try {  
    // Now that we've selected the anchor text, execute the copy command  
    var successful = document.execCommand('copy');  
    var msg = successful ? 'successful' : 'unsuccessful';  
    console.log('Copy Uid command was ' + msg);  
  } catch(err) {  
    console.log('Oops, unable to copy');  
  }  

  // Remove the selections - NOTE: Should use
  // removeRange(range) when it is supported  
  window.getSelection().removeAllRanges();  
});
</script>
{% endblock body %}
